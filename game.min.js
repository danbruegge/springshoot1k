function b(){return[Math.floor(Math.random()*(d-2*e-3*e)+3*e),Math.floor(Math.random()*(f-2*e-e)+e),9]}var g=window,d=640,f=480,e=32,h=[],j=b(),k=[e/2,f/2-e/2],l=0,m=99,p=0;a.canvas.width=d;a.canvas.height=f;function q(c,n,r,s,t){a.beginPath();a.rect(c,n,r,s);a.fillStyle=t;a.closePath();a.fill()}g.onkeydown=function(c){c=c.keyCode;38==c&&(k[1]-=9);40==c&&(k[1]+=9);32==c&&h.push([k[0]+e,k[1]+e/2-3]);0>=k[1]&&(k[1]=0);k[1]>=f-e&&(k[1]=f-e)}; var u=g.setInterval(function(){a.clearRect(0,0,d,f);q(0,0,d,f,"#cc6");q(576,416,e,e,"#f00");q(2*e,0,2,f,"#993");q(j[0],j[1],e,e,"#f0"+j[2]);for(var c=0;c<h.length;c++)if(h[c][0]+=2,h[c][0]<=d-12){var n=h[c][1]>j[1]&&h[c][1]<j[1]+e;h[c][0]>=j[0]&&n?(h.splice(c,1),0<j[2]?(q(j[0],j[1],e,e,"#f0"+j[2]),j[2]--):(l++,j=b(),q(j[0],j[1],e,e,"#f0"+j[2]))):q(h[c][0],h[c][1],6,6,"#ff0")}q(k[0],k[1],e,e,"#693");a.fillText("T: "+m,80,9);a.fillText("K: "+l,80,20);p++;99==p&&(m--,p=0);-1==m&&(g.clearInterval(u), a.fillStyle="#000",a.textAlign="center",a.fillText("HIT F5",d/2,f/2))},10);
